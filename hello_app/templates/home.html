{% extends "layout.html" %}
{% block title %}
Weather History Tracker - Homepage
{% endblock %}
{% block content %}

<style>
.container {
    max-width: 900px;
    margin: 32px auto;
    background: rgba(255,255,255,0.92);
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
}
body {
    background-image: url('https://t4.ftcdn.net/jpg/05/76/50/59/360_F_576505936_VLdEYvjSBYgs1EkweYeGqBPgbxHFuenC.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center center;
}
.header-highlight {
    background-color: #bfc3c8;
    display: inline-block;
    padding: 0.5em 1em;
    border-radius: 8px;
}
@media (max-width: 767.98px) {
  .header-highlight {
    font-size: 1.5rem;
  }
}
</style>

<div class="container">
    <h1 class="header-highlight text-center w-100">Weather History Tracker</h1>
    </p>Welcome to the Weather History Tracker. This website allows you to easily view historical weather data based on:</p>
    <ul>
        <li>Rainfall</li>
        <li>Temperature</li>
        <li>Wind Speed</li>
        <li>Sunrise and sunset</li>
    </ul>
    <form method="get" action="/">
      <label>Latitude: <input type="text" name="latitude" value="{{ request.args.get('latitude', '51.5') }}" style="width:50px"></label>
      <label>Longitude: <input type="text" name="longitude" value="{{ request.args.get('longitude', '-0.12') }}" style="width:50px"></label>
      <label>Start Date: <input type="date" name="start_date" value="{{ request.args.get('start_date', '2025-03-01') }}"></label>
      <label>End Date: <input type="date" name="end_date" value="{{ request.args.get('end_date', '2025-04-01') }}"></label>
      <button type="submit">Get Weather</button>
    </form>

    {% if api_data %}
        <div class="table-responsive mt-4">
            <h3>Daily Weather Data</h3>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Max Temp (°C)</th>
                        <th>Min Temp (°C)</th>
                        <th>Max Wind Speed (km/h)</th>
                        <th>Rain (mm)</th>
                        <th>Sunrise</th>
                        <th>Sunset</th>
                    </tr>
                </thead>
                <tbody>
                    {% for day in api_data %}
                        <tr>
                            <td>{{ day.time }}</td>
                            <td>{{ day.temperature_2m_max }}</td>
                            <td>{{ day.temperature_2m_min }}</td>
                            <td>{{ day.wind_speed_10m_max }}</td>
                            <td>{{ day.rain_sum }}</td>
                            <td>{{ day.sunrise.split('T')[1][:5] if day.sunrise and 'T' in day.sunrise else day.sunrise[:5].replace(':', '/') if day.sunrise }}</td>
                            <td>{{ day.sunset.split('T')[1][:5] if day.sunset and 'T' in day.sunset else day.sunset[:5].replace(':', '/') if day.sunset }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>

 {% endblock %}